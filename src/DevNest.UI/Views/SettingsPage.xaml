<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="DevNest.UI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:DevNest.UI.Converters"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:DevNest.UI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:DevNest.Core.Models"
    mc:Ignorable="d">

    <Page.Resources>
        <!--  Converter to check if count > 0 for enabling the ComboBox  -->
        <converters:CountToBooleanConverter x:Key="CountToBooleanConverter" />
        <!--  Converter to show appropriate placeholder text  -->
        <converters:CountToPlaceholderConverter x:Key="CountToPlaceholderConverter" />
    </Page.Resources>

    <i:Interaction.Behaviors>
        <core:EventTriggerBehavior EventName="Loaded">
            <core:InvokeCommandAction Command="{x:Bind ViewModel.LoadCommand}" />
        </core:EventTriggerBehavior>
    </i:Interaction.Behaviors>

    <ScrollViewer Padding="32" Background="#111827">
        <StackPanel Spacing="24">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,8"
                    FontSize="24"
                    Style="{StaticResource TitleTextBlockStyle}"
                    Text="Settings" />
            </StackPanel>

            <!--  General Settings  -->
            <Border
                Padding="16"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8">
                <StackPanel Spacing="16">
                    <TextBlock
                        FontSize="24"
                        Style="{StaticResource TitleTextBlockStyle}"
                        Text="General" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="Start with Windows" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Launch DevNest when Windows starts" />
                        </StackPanel>

                        <ToggleSwitch
                            x:Name="StartWithWindowsToggle"
                            Grid.Column="1"
                            IsOn="{x:Bind ViewModel.StartWithWindows, Mode=TwoWay}" />
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="Minimize to System Tray" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Minimize to system tray instead of taskbar" />
                        </StackPanel>

                        <ToggleSwitch
                            x:Name="MinimizeToTrayToggle"
                            Grid.Column="1"
                            IsOn="{x:Bind ViewModel.MinimizeToSystemTray, Mode=TwoWay}" />
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="Auto Virtual Hosts" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Automatically create virtual hosts for new sites" />
                        </StackPanel>

                        <ToggleSwitch
                            x:Name="AutoVirtualHostsToggle"
                            Grid.Column="1"
                            IsOn="{x:Bind ViewModel.AutoVirtualHosts, Mode=TwoWay}" />
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="Auto Create Database" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Automatically create databases for new projects" />
                        </StackPanel>

                        <ToggleSwitch
                            x:Name="AutoCreateDatabaseToggle"
                            Grid.Column="1"
                            IsOn="{x:Bind ViewModel.AutoCreateDatabase, Mode=TwoWay}" />
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="200" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="Install Directory" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Default directory for DevNest installations" />
                        </StackPanel>
                        <StackPanel Grid.Column="1" Spacing="8">
                            <TextBox
                                x:Name="InstallDirectoryTextBox"
                                HorizontalAlignment="Stretch"
                                IsReadOnly="True"
                                Text="{x:Bind ViewModel.InstallDirectory, Mode=OneWay}" />
                            <Button
                                x:Name="BrowseInstallDirectoryButton"
                                HorizontalAlignment="Stretch"
                                Command="{x:Bind ViewModel.BrowseFolderCommand}"
                                Content="Browse" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>            
            <!--  About Section  -->
            <Border
                Padding="16"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8">
                <StackPanel Spacing="16">
                    <TextBlock
                        FontSize="24"
                        Style="{StaticResource TitleTextBlockStyle}"
                        Text="About" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock FontWeight="SemiBold" Text="DevNest" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Version 1.0.0" />
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Your development companion" />
                        </StackPanel>

                        <StackPanel
                            Grid.Column="1"
                            Orientation="Horizontal"
                            Spacing="8">
                            <Button Content="Check for Updates" />
                            <Button Content="About" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
            <!--  Action Buttons  -->
            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Command="{x:Bind ViewModel.ResetSettingsCommand}" Content="Reset to Defaults" />
                <Button Content="Export Settings" />
                <Button Content="Import Settings" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
