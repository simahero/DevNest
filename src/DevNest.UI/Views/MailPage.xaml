<Page
    x:Class="DevNest.UI.Views.MailPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="using:DevNest.UI.Converters"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:DevNest.UI.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <i:Interaction.Behaviors>
        <core:EventTriggerBehavior EventName="Loaded">
            <core:InvokeCommandAction Command="{x:Bind ViewModel.LoadCommand}" />
        </core:EventTriggerBehavior>
    </i:Interaction.Behaviors>

    <Page.Resources>
        <converters:SmtpStatusToColorConverter x:Key="SmtpStatusToColorConverter" />
        <converters:SmtpStatusToActionTextConverter x:Key="SmtpStatusToActionTextConverter" />
        <converters:BoolNegationConverter x:Key="BoolNegationConverter" />
    </Page.Resources>

    <ScrollViewer Padding="32" Background="#0b0f17">
        <StackPanel Spacing="24">
            <StackPanel>
                <TextBlock
                    Margin="0,0,0,8"
                    FontSize="24"
                    Style="{StaticResource TitleTextBlockStyle}"
                    Text="Mail" />
            </StackPanel>

            <Border
                Margin="0,0,0,0"
                Padding="24,12"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Status Indicator  -->
                    <Border
                        Grid.Column="0"
                        Width="12"
                        Height="12"
                        Margin="0,0,16,0"
                        VerticalAlignment="Center"
                        Background="{x:Bind ViewModel.SmtpServer.IsRunning, Mode=OneWay, Converter={StaticResource SmtpStatusToColorConverter}}"
                        CornerRadius="6" />

                    <!--  Service Info  -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Style="{StaticResource BodyStrongTextBlockStyle}" Text="SMTP" />
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Style="{StaticResource CaptionTextBlockStyle}"
                                Text="Mailing Server" />
                        </StackPanel>
                    </StackPanel>

                    <!--  Toggle Button  -->
                    <ToggleButton
                        Grid.Column="3"
                        MinWidth="80"
                        Command="{x:Bind ViewModel.ToggleSMTPCommand}"
                        Content="{x:Bind ViewModel.SmtpServer.IsRunning, Mode=OneWay, Converter={StaticResource SmtpStatusToActionTextConverter}}"
                        IsChecked="{x:Bind ViewModel.SmtpServer.IsRunning, Mode=OneWay}"
                        IsEnabled="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource BoolNegationConverter}}" />
                </Grid>
            </Border>

            <Border
                Margin="0,0,0,0"
                Padding="24,12"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,8"
                        Style="{StaticResource BodyStrongTextBlockStyle}"
                        Text="SMTP Credentials" />
                    <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="IP: " />
                        <TextBlock Margin="8,0,0,0" Text="127.0.0.1" />
                    </StackPanel>
                    <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="Port: " />
                        <TextBlock Margin="8,0,0,0" Text="{x:Bind ViewModel.SmtpServer.Port, Mode=OneWay}" />
                    </StackPanel>
                    <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="Username: " />
                        <TextBlock Margin="8,0,0,0" Text="-" />
                    </StackPanel>
                    <StackPanel Margin="0,0,0,8" Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="Password: " />
                        <TextBlock Margin="8,0,0,0" Text="-" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Padding="16" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                <StackPanel Spacing="16">
                    <TextBlock
                        FontSize="20"
                        FontWeight="SemiBold"
                        Text="Quick Actions" />
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Button Command="{x:Bind ViewModel.OpenMailsCommand}" Content="Open Mails" />
                    </StackPanel>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>
